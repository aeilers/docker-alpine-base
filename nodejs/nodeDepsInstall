#!/bin/bash

###
# node install script for Alpine Linux on Docker
###
runNode () {
    local DIVIDER="===================="
    local TEMPLATE="\n\n${DIVIDER}${DIVIDER}${DIVIDER}\n%s\n\n\n"

    ###
    # NOTE: additional packages for possible Node.js dependencies compile
    ###
    printf "${TEMPLATE}" "Installing Alpine Linux Packages for Node.js"
    setupDependencies

    ###
    # NOTE: add additional file/folder removal here for all images
    ###
    printf "${TEMPLATE}" "Removing unnecessary files"
    clearApkCache
}

###
# setup node build dependencies that I've come across so far
###
setupDependencies () {
    apk update && apk add \
        autoconf \
        automake \
        binutils-gold \
        curl \
        g++ \
        gcc \
        gnupg \
        libgcc \
        libpng-dev \
        libstdc++ \
        libtool \
        libuv-dev \
        linux-headers \
        make \
        nasm \
        openssl-dev \
        paxctl \
        python \
        tar \
        zlib-dev
}

runNode && exit 0
